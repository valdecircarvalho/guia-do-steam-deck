<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>- O Guia do Steam Deck</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/style.min.1841c24ff2d784e3c96fa415283e8fcc9b18137507bfd8fca7eacf51b7d808c6.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class="menu-item-o guia do steam deck"><a href=/guia/><span>O Guia do Steam Deck</span></a></li><li class="menu-item-como contribuir"><a href=/guia/como-contribuir-com-o-guia-do-steam-deck><span>Como Contribuir</span></a></li><li class=menu-item-sobre><a href=/guia/sobre-o-guia-do-steam-deck><span>Sobre</span></a></li><li class="menu-item-twitter @guiadosteamdeck"><a href=https://twitter.com/guiadosteamdeck><span>Twitter @guiadosteamdeck</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=/><img alt=Logo src=/images/logo.svg></a></div><div class=logo-mobile><a href=/><img alt=Logo src=/images/logo.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class="menu-item-o guia do steam deck"><a href=/guia/><span>O Guia do Steam Deck</span></a></li><li class="menu-item-como contribuir"><a href=/guia/como-contribuir-com-o-guia-do-steam-deck><span>Como Contribuir</span></a></li><li class=menu-item-sobre><a href=/guia/sobre-o-guia-do-steam-deck><span>Sobre</span></a></li><li class="menu-item-twitter @guiadosteamdeck"><a href=https://twitter.com/guiadosteamdeck><span>Twitter @guiadosteamdeck</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Guia</h4><ul><li><a href=/guia/o-steam-deck/>1 - O Steam Deck</a></li><li><a href=/guia/o-steam-deck-no-brasil/>1.1 - O Steam Deck no Brasil</a></li><li><a href=/guia/qual-modelo-de-steam-deck-devo-comprar/>1.2 - Qual modelo comprar?</a></li><li><a href=/guia/acessorios-para-o-steam-deck/>1.3 - Acessórios "Obrigatórios"</a></li><li><a href=/guia/acessorios-para-o-steam-deck-em-impressao-3d/>1.4 - Impressão 3D de acessórios para o Steam Deck</a></li><li><a href=/guia/links-oficiais-sobre-o-steam-deck/>2.0 - Links Oficiais</a></li><li><a href=/guia/redes-sociais-steam-deck-twitter/>2.1 - Redes Sociais - Twitter</a></li><li><a href=/guia/grupos-steam-deck-telegram-whatsapp/>2.2 - Grupos sobre o Stem Deck</a></li><li><a href=/guia/comunidades-e-ferramentas-steam-deck-no-github/>2.3 - Steam Deck no Github</a></li><li><a href=/guia/canais-youtube-sobre-steam-deck/>2.4 - Canais de Youtube sobre o Steam Deck</a></li><li><a href=/guia/comunidades-reddit-steam-deck/>2.5 - Comunidades Reddit</a></li><li><a href=/guia/sites-e-blogs-sobre-steam-deck/>2.6- Sites e Blogs sobre o Steam Deck</a></li><li><a href=/guia/sites-e-blogs-sobre-steam-deck/>3.0 - Jogos no Steam Deck</a></li><li><a href=/guia/3.1-protondb-steam-deck/>3.1 - ProtonDB</a></li><li><a href=/guia/3.2-como-jogar-jogos-nao-steam-no-steam-deck/>3.2 - Como instalar jogos "Não-Steam" no Steam Deck</a></li><li><a href=/guia/3.3-onde-comprar-jogos-para-o-steam-deck/>3.3 - Outros sites para comprar jogos Steam</a></li><li><a href=/guia/ajuda/primeiros-passos-na-steam/>4.0 - Primeiros Passos na Steam</a></li><li><a href=/guia/ajuda/primeiros-passos-com-o-seu-steam-deck/>4.1 - Primeiros Passos com o seu novo Steam Deck</a></li><li><a href=/guia/ajuda/controles-do-steam-deck/>4.2 - Controles do Steam Deck</a></li><li><a href=/guia/ajuda/configuracao-do-steam-deck/>4.3 - Como configurar o seu Steam Deck do Zero</a></li><li><a href=/guia/windows-no-steam-deck/>5.0 - Windows no Steam Deck</a></li><li><a href=/guia/steam-deck-hacks-utilitarios/>6.0 - Steam Deck Hacks & Utilitários</a></li><li><a href=/guia/emulacao/emulacao-no-steam-deck/>7.0 - Emulação no Steam Deck</a></li><li><a href=/guia/emulacao/o-guia-descomplicado-do-emudeck-parte-1/>7.1 - O Guia descomplicado do Emudeck - Parte 1</a></li><li><a href=/guia/emulacao/o-guia-descomplicado-do-emudeck-parte-2/>7.2 - O Guia Descomplicado de ROMsets para Emudeck - Parte 2</a></li><li><a href=/guia/emulacao/o-guia-descomplicado-do-emudeck-parte-3/>7.3 - O Guia Descomplicado de ROMsets para Emudeck - Parte 2</a></li><li><a href=/guia/emulacao/7.4-retrogamecorps/>7.4 - Guia de Emulação para o Steam Deck - Retro Game Corps</a></li><li><a href=/guia/emulacao/7.5-emulacao-packs-completos-para-steam-deck/>7.5 - Packs completos de Emuladores para o Steam Deck</a></li><li><a href=/guia/emulacao/mais-informacao-sobre-emulacao-no-steam-deck/>7.6 - Mais informações sobre emulação no Steam Deck</a></li><li><a href=/guia/emulacao/7.9-roms/>7.9 - Onde baixar roms para os emuladores</a></li><li><a href=/guia/sobre-o-guia-do-steam-deck/>Sobre o Guia do Steam Deck</a></li><li><a href=/guia/como-contribuir-com-o-guia-do-steam-deck/>Como contribuir com o Guia do Steam Deck</a></li><li><a href=/guia/ajuda/50-steam-deck-dicas/></a></li><li><a href=/guia/ajuda/ajuda-recuperacao-steam-deck/></a></li><li><a href=/guia/ajuda/ajuda-steam-deck-desktop/></a></li><li><a href=/guia/ajuda/ajuda-steam-deck-docking-station/></a></li><li><a href=/guia/ajuda/ajuda-steam-deck-software-e-resolucao-de-problemas/></a></li><li><a href=/guia/ajuda/ajuda-steam-deck-uso-basico-e-resolucao-de-problemas/></a></li><li><a href=/guia/ajuda/steam-deck-recovery-instructions/></a></li><li><a href=/guia/ajuda/steamdeck-wiki/></a></li><li><a href=/guia/ajuda/tudo-sobre-o-proton-no-steam-deck/></a></li><li><a href=/guia/avancado/steamdeck-performance/></a></li><li><a href=/guia/sources/awesome-steam-deck/code-of-conduct/></a></li><li><a href=/guia/sources/awesome-steam-deck/contributing/></a></li><li><a href=/guia/sources/awesome-steam-deck/readme/></a></li><li><a href=/guia/sources/awesome-steam-deck/todo/></a></li><li><a href=/guia/sources/awesome-steamdeck/code_of_conduct/></a></li><li><a href=/guia/sources/awesome-steamdeck/contributing/></a></li><li><a href=/guia/sources/awesome-steamdeck/readme/></a></li><li><a href=/guia/sources/emudeck-wiki/_sidebar/></a></li><li><a href=/guia/sources/emudeck-wiki/cemu-native/></a></li><li><a href=/guia/sources/emudeck-wiki/cemu/></a></li><li><a href=/guia/sources/emudeck-wiki/changing-mlc01-for-cemu/></a></li><li><a href=/guia/sources/emudeck-wiki/cheat-sheet/></a></li><li><a href=/guia/sources/emudeck-wiki/citra/></a></li><li><a href=/guia/sources/emudeck-wiki/cloud-services/></a></li><li><a href=/guia/sources/emudeck-wiki/community-creations/></a></li><li><a href=/guia/sources/emudeck-wiki/dolphin/></a></li><li><a href=/guia/sources/emudeck-wiki/duckstation/></a></li><li><a href=/guia/sources/emudeck-wiki/emulationstation-de/></a></li><li><a href=/guia/sources/emudeck-wiki/file-management/></a></li><li><a href=/guia/sources/emudeck-wiki/frequently-asked-questions/></a></li><li><a href=/guia/sources/emudeck-wiki/home/></a></li><li><a href=/guia/sources/emudeck-wiki/homebrew-games/></a></li><li><a href=/guia/sources/emudeck-wiki/hotkeys/></a></li><li><a href=/guia/sources/emudeck-wiki/mame/></a></li><li><a href=/guia/sources/emudeck-wiki/melonds/></a></li><li><a href=/guia/sources/emudeck-wiki/metal-gear-solid-4---rpcs3-setup-guide/></a></li><li><a href=/guia/sources/emudeck-wiki/mgba/></a></li><li><a href=/guia/sources/emudeck-wiki/nes---mesen-core/></a></li><li><a href=/guia/sources/emudeck-wiki/pcsx2-qt/></a></li><li><a href=/guia/sources/emudeck-wiki/ppsspp/></a></li><li><a href=/guia/sources/emudeck-wiki/primehack/></a></li><li><a href=/guia/sources/emudeck-wiki/retroarch/></a></li><li><a href=/guia/sources/emudeck-wiki/rmg/></a></li><li><a href=/guia/sources/emudeck-wiki/rpcs3/></a></li><li><a href=/guia/sources/emudeck-wiki/ryujinx/></a></li><li><a href=/guia/sources/emudeck-wiki/scummvm/></a></li><li><a href=/guia/sources/emudeck-wiki/steam-rom-manager/></a></li><li><a href=/guia/sources/emudeck-wiki/third-party-emulation/></a></li><li><a href=/guia/sources/emudeck-wiki/updating/></a></li><li><a href=/guia/sources/emudeck-wiki/vita3k/></a></li><li><a href=/guia/sources/emudeck-wiki/xemu/></a></li><li><a href=/guia/sources/emudeck-wiki/xenia/></a></li><li><a href=/guia/sources/emudeck-wiki/yuzu/></a></li><li><a href=/guia/sources/steam-deck-guide-en/accessories/></a></li><li><a href=/guia/sources/steam-deck-guide-en/developers/readme/></a></li><li><a href=/guia/sources/steam-deck-guide-en/games-and-software/games/></a></li><li><a href=/guia/sources/steam-deck-guide-en/games-and-software/operating-systems/></a></li><li><a href=/guia/sources/steam-deck-guide-en/games-and-software/readme/></a></li><li><a href=/guia/sources/steam-deck-guide-en/games-and-software/software/></a></li><li><a href=/guia/sources/steam-deck-guide-en/getting-started/></a></li><li><a href=/guia/sources/steam-deck-guide-en/glossary/></a></li><li><a href=/guia/sources/steam-deck-guide-en/sites/></a></li><li><a href=/guia/sources/steam-deck-guide-en/videos/></a></li><li><a href=/guia/sources/steam-deck-utilities/docs/faq/></a></li><li><a href=/guia/sources/steam-deck-utilities/docs/manual-install/></a></li><li class=active><a href=/guia/sources/steam-deck-utilities/docs/tweak-explanation/></a></li><li><a href=/guia/sources/steam-deck-utilities/readme/></a></li><li><a href=/guia/sources/steamdeck-emulation/code_of_conduct/></a></li><li><a href=/guia/sources/steamdeck-emulation/contributing/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/citra/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/dolphin/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/mednaffe/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/melonds/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/pcsx2/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/ppsspp/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/simple64/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/snes9x/></a></li><li><a href=/guia/sources/steamdeck-emulation/emulators/yuzu/></a></li><li><a href=/guia/sources/steamdeck-emulation/readme/></a></li><li><a href=/guia/news/chaveiros-steam-deck/>Chaveiros Steam Deck</a></li></ul></div></div></div><div class="col-12 col-md-9"><h1 class=title></h1><div class=content><h1 id=tweak-explanation>Tweak Explanation</h1><h2 id=swap-size>Swap Size</h2><h3 id=what-it-is>What It Is</h3><p>As per the <a href=https://wiki.archlinux.org/title/swap>Arch Wiki</a>:</p><pre tabindex=0><code>Linux divides its physical RAM (random access memory) into chunks of memory called pages. Swapping is the process 
whereby a page of memory is copied to the preconfigured space on the hard disk, called swap space, to free up that 
page of memory. The combined sizes of the physical memory and the swap space is the amount of virtual memory available.
</code></pre><h3 id=why-did-i-change-it>Why Did I Change It?</h3><p>By increasing the swap size, we can do a few things:</p><ul><li>Significantly reduce memory pressure<ul><li>This allows more to be cached while simultaneously allowing for VRAM to inflate a bit more</li></ul></li><li>Have a stash of &ldquo;emergency memory&rdquo; in case physical memory runs low<ul><li>This prevents bulk evictions and distributes memory management across a longer period of time, preventing latency
spikes</li></ul></li></ul><h3 id=how-its-done>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo swapoff -a
</span></span><span style=display:flex><span>sudo dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/zero of<span style=color:#f92672>=</span>/home/swapfile bs<span style=color:#f92672>=</span>1G count<span style=color:#f92672>=</span>SIZE_IN_GB status<span style=color:#f92672>=</span>none
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>0600</span> /home/swapfile
</span></span><span style=display:flex><span>sudo mkswap /home/swapfile  
</span></span><span style=display:flex><span>sudo swapon /home/swapfile
</span></span></code></pre></div><h2 id=swappiness>Swappiness</h2><h3 id=what-it-does>What It Does</h3><p>Also from the <a href=https://wiki.archlinux.org/title/swap#Swappiness>Arch Wiki</a>:</p><blockquote><p>The swappiness sysctl parameter represents the kernel&rsquo;s preference (or avoidance) of swap space. Swappiness can have
a value between 0 and 200 (max 100 if Linux &lt; 5.8), the default value is 60. A low value causes the kernel to avoid
swapping, a high value causes the kernel to try to use swap space, and a value of 100 means IO cost is assumed to be
equal. Using a low value on sufficient memory is known to improve responsiveness on many systems.</p></blockquote><h3 id=why-did-i-change-it-1>Why Did I Change It?</h3><p>By default, the Deck has a very high swappiness of 100, which can lead to data going to swap when there&rsquo;s a lot of
physical memory left.</p><p>This can can be bad for two reasons:</p><ul><li>Excessive writes can shorten the life of your drive</li><li>Swap is much slower than memory, and using it slows things down</li></ul><p>So, by reducing swap to a lower value, or my recommended value of 1, we can:</p><ol><li>Ensure that swap is only used at the very last second, when it&rsquo;s really needed</li><li>Preserve drive health</li></ol><h3 id=how-its-done-1>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo VALUE | sudo tee /proc/sys/vm/swappiness
</span></span></code></pre></div><h2 id=transparent-hugepages>Transparent Hugepages</h2><h3 id=what-it-does-1>What It Does</h3><p>From an <a href=https://xeome.github.io/notes/Transparent-Huge-Pages/>excellent writeup by Emin here</a>:</p><blockquote><p>When the CPU assigns memory to processes that require it, it typically does so in 4 KB page chunks. Because the CPU’s
MMU unit actively needs to translate virtual memory to physical memory upon incoming I/O requests, going through all 4
KB pages is naturally an expensive operation. Fortunately, it has its own TLB cache (translation lookaside buffer),
which reduces the potential amount of time required to access a specific memory address by caching the most recently
used memory.</p></blockquote><h3 id=why-did-i-change-it-2>Why Did I Change It?</h3><p>As mentioned in the explanation, pages are expensive to allocate. Hugepages are significantly easier to allocate and
look up, and they reduce a lot of stutter when dealing with large amounts of memory.</p><h3 id=how-its-done-2>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo always | sudo tee /sys/kernel/mm/transparent_hugepage/enabled
</span></span></code></pre></div><h2 id=shared-memory-in-transparent-hugepages>Shared Memory in Transparent Hugepages</h2><h3 id=what-it-does-2>What It Does</h3><p>As per <a href=https://www.kernel.org/doc/html/next/admin-guide/mm/transhuge.html#hugepages-in-tmpfs-shmem>the kernel docs</a>:</p><blockquote><p>The mount is used for SysV SHM, memfds, shared anonymous mmaps (of /dev/zero or MAP_ANONYMOUS), GPU drivers’ DRM
objects, Ashmem.</p></blockquote><p>Essentially, it allows those things to end up in hugepages.</p><h3 id=why-did-i-change-it-3>Why Did I Change It?</h3><p>For the same reasons as enabling hugepages, this can reduce some latency in memory management.</p><h3 id=how-its-done-3>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo advise | sudo tee /sys/kernel/mm/transparent_hugepage/shmem_enabled
</span></span></code></pre></div><h2 id=compaction-proactiveness>Compaction Proactiveness</h2><h3 id=what-it-does-3>What It Does</h3><p>This feature proactively defragments memory when Linux detects &ldquo;downtime&rdquo;.</p><h3 id=why-did-i-change-it-4>Why Did I Change It?</h3><p>Even the <a href=https://docs.kernel.org/admin-guide/sysctl/vm.html#compaction-proactiveness>kernel documentation</a> agrees
that this feature has a system-wide impact on performance:</p><blockquote><p>Note that compaction has a non-trivial system-wide impact as pages belonging to different processes are moved around,
which could also lead to latency spikes in unsuspecting applications.</p></blockquote><p>Essentially, even though Linux tried to detect the proper time to do compaction, there&rsquo;s <em>never</em> a good time during
gaming, so it&rsquo;s best to disable it.</p><h3 id=how-its-done-4>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#ae81ff>0</span> | sudo tee /proc/sys/vm/compaction_proactiveness
</span></span></code></pre></div><h2 id=hugepage-defragmentation>Hugepage Defragmentation</h2><h3 id=what-it-does-4>What It Does</h3><p>It&rsquo;s the same thing as proactive compaction, but for hugepages.</p><h3 id=why-did-i-change-it-5>Why Did I Change It?</h3><p>See the reasons for disabling proactive compaction.</p><h3 id=how-its-done-5>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#ae81ff>0</span> | sudo tee /sys/kernel/mm/transparent_hugepage/khugepaged/defrag
</span></span></code></pre></div><h2 id=page-lock-unfairness>Page Lock Unfairness</h2><h3 id=what-it-does-5>What It Does</h3><p>PLU configures how many times a process can try to get a lock on a page before &ldquo;fair&rdquo; behavior kicks in, and guarantees
that process access to a page.
See <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=5ef64cc8987a9211d3f3667331ba3411a94ddc79">the commit</a>
for details.</p><h3 id=why-did-i-change-it-6>Why Did I Change It?</h3><p>Unfortunately, <a href=https://www.phoronix.com/review/linux-59-fairness>it can have negative side effects</a>, especially in
gaming. Having processes wait repeatedly can cause games to have many issues with stutter, and causes some to sleep
when they shouldn&rsquo;t.</p><h3 id=how-its-done-6>How It&rsquo;s Done</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#ae81ff>1</span> | sudo tee /proc/sys/vm/page_lock_unfairness
</span></span></code></pre></div><h2 id=sources>Sources</h2><p>Some wording and general sanity checks were provided by <a href=https://github.com/xeome>Emin</a>, who is likely to be a big
contributor going forward, given his interest in low-level Linux optimizations.</p><p>The rest is provided by <a href=https://wiki.archlinux.org>the Arch Wiki</a>, <a href=https://www.phoronix.com>Phoronix</a>,
<a href=https://docs.kernel.org>kernel docs</a> and various bits of knowledge that I&rsquo;ve gathered over the years.</p></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><ul><li class=zerostatic><a href=https://guiadosteamdeck.com.br>O Guia do Steam Deck em Português</a></li></ul></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js></script></body></html>